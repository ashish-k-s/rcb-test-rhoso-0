#  Configure the secrets

== Configure the Secrets

In this section, we will configure the necessary secrets for deploying Red Hat OpenStack Platform (RHOSP) control plane services on a Red Hat OpenShift Container Platform (RHOCP). Secrets are objects that enable sensitive data to be stored in the container environment. Here, we will focus on setting up the required secrets for authentication and configuration purposes.

### Prerequisites

- Access to the RHOCP cluster as an administrator or with appropriate permissions.
- The NMState Operator, MetalLB Operator, and Cert-Manager Operator installed.
- Configured Node Network Configuration Policy and Network Attachment Definition (refer to previous sections).

### Steps to Configure Secrets

1. **Create the `openstack-secrets` secret**

   OpenShift secrets are defined using YAML manifest files. Create a new file named `openstack-secrets.yaml`:

   ```yaml
   apiVersion: v1
   kind: Secret
   metadata:
     name: openstack-secrets
     namespace: openstack  # Replace 'openstack' with your desired namespace
   type: Opaque
   data:
     # Add key-value pairs for the required secrets (adjust keys and values as needed)
     admin-password: <base64 encoded admin password>
     database-password: <base64 encoded database password>
     rabbitmq-password: <base64 encoded rabbitmq password>
   ```

   Replace `<base64 encoded ...>` with actual base64-encoded passwords.

2. **Apply the secret configuration**

   Apply the secret manifest to your OpenShift cluster using `oc apply`:

   ```bash
   oc apply -f openstack-secrets.yaml
   ```

3. **Create additional required secrets (if necessary)**

   Depending on your environment, you might need more secrets like TLS certificates for communication between services or other application-specific secrets. Create and apply similar YAML manifests for those cases.

### Verification

After applying the secrets, verify their creation:

```bash
oc get secret openstack-secrets -n openstack
```

Ensure that all required keys and values are correctly set within the secret object.

### Conclusion

With these secrets configured, you've laid down the foundation for deploying control plane services securely in your RHOSP environment on RHOCP. The next steps involve installing the OpenStack Operator and creating the OpenStack Control Plane (refer to subsequent sections of the training content). Make sure to follow each section's prerequisites and instructions carefully to ensure a successful deployment.