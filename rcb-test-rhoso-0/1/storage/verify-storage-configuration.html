<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Verify storage configuration :: RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</title>
    <link rel="prev" href="configuring-nfs-storage.html">
    <link rel="next" href="../install-control-plane/install-control-plane.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rcb-test-rhoso-0" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction/introduction.html">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/traditional-tripleo-deployment-versus-deployment-with-openshift-cluster.html">Traditional TripleO deployment versus deployment with OpenShift cluster.</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/rhoso-installation-process-overview.html">RHOSO installation process overview</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../prerequisites-for-installation/prerequisites-for-installation.html">Prerequisites for Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../prerequisites-for-installation/about-the-prerequisite-operators.html">About the Prerequisite Operators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../prerequisites-for-installation/install-nmstate-operator.html">Install NMState Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../prerequisites-for-installation/install-metallb-operator.html">Install MetalLB Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../prerequisites-for-installation/install-cert-manager-operator.html">Install Cert-Manager Operator</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../preparing-rhocp-for-rhosp-network-isolation/preparing-rhocp-for-rhosp-network-isolation.html">Preparing RHOCP for RHOSP Network Isolation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preparing-rhocp-for-rhosp-network-isolation/setting-up-node-network-configuration-policy.html">Setting up Node Network Configuration Policy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preparing-rhocp-for-rhosp-network-isolation/configuring-network-attachment-definition.html">Configuring Network Attachment Definition</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preparing-rhocp-for-rhosp-network-isolation/configure-metallb-ip-address-pools.html">Configure MetalLB IP Address Pools</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preparing-rhocp-for-rhosp-network-isolation/setup-metallb-l2-advertisement-configuration.html">Setup MetalLB L2 Advertisement configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="storage.html">Storage</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuring-nfs-storage.html">Configuring NFS storage</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="verify-storage-configuration.html">Verify storage configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../install-control-plane/install-control-plane.html">Install control plane</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install-control-plane/configure-the-secrets.html">Configure the secrets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install-control-plane/install-the-openstack-operator.html">Install the OpenStack Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install-control-plane/create-the-openstack-control-plane.html">Create the OpenStack Control Plane</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install-control-plane/troubleshoot-the-openstack-control-plane.html">Troubleshoot the OpenStack Control Plane</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install-control-plane/verify-openstack-control-plane-configuration.html">Verify OpenStack control plane configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../create-data-plane/create-data-plane.html">Create data plane</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-data-plane/create-the-data-plane-network-configuration.html">Create the Data Plane Network configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-data-plane/create-the-data-plane-vm.html">Create the Data Plane VM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-data-plane/data-plane-deployment.html">Data Plane Deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-data-plane/troubleshoot-the-data-plane-deployment.html">Troubleshoot the Data Plane deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-data-plane/verify-data-plane-deployment.html">Verify data plane deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../access-openstack/access-openstack.html">Access OpenStack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../access-openstack/steps-to-access-openstack.html">Steps to Access OpenStack</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</a></li>
    <li><a href="storage.html">Storage</a></li>
    <li><a href="verify-storage-configuration.html">Verify storage configuration</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Verify storage configuration</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>===</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verify_storage_configuration"><a class="anchor" href="#_verify_storage_configuration"></a>Verify Storage Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After setting up NFS storage as per the [CONFIGURING NFS STORAGE](#configuring-nfs-storage) section, it&#8217;s crucial to verify that the storage has been correctly configured for use with RHOSP (Red Hat OpenStack Platform). Here’s a step-by-step guide on how to validate your storage setup.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites:</h3>
<div class="ulist">
<ul>
<li>
<p>You must have previously completed the [CONFIGURING NFS STORAGE](#configuring-nfs-storage) section, ensuring an active NFS server is running and accessible.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_steps_to_verify_storage_configuration"><a class="anchor" href="#_steps_to_verify_storage_configuration"></a>Steps to Verify Storage Configuration</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Check NFS Export Availability</strong></p>
<div class="ulist">
<ul>
<li>
<p>Use a client machine outside your OpenShift cluster to access the NFS share.</p>
</li>
<li>
<p>Execute the <code>showmount</code> command on the NFS server to confirm that exports are active:</p>
<div class="literalblock">
<div class="content">
<pre>```bash
showmount -e &lt;NFS_Server_IP&gt;
```</pre>
</div>
</div>
</li>
<li>
<p>Ensure the desired export directory is listed, indicating it&#8217;s available for client connections.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Test Access from an RHOSP Node</strong></p>
<div class="ulist">
<ul>
<li>
<p>SSH into one of your RHOSP nodes or use a machine within the OpenShift cluster where you intend to deploy RHOSP services.</p>
</li>
<li>
<p>Attempt to mount the NFS share using the <code>mount</code> command:</p>
<div class="literalblock">
<div class="content">
<pre>```bash
sudo mount &lt;NFS_Server_IP&gt;:/&lt;export_path&gt; /mnt/temp -o nfsvers=4.1,noresvport
```</pre>
</div>
</div>
</li>
<li>
<p>Replace <code>&lt;NFS_Server_IP&gt;</code> and <code>&lt;export_path&gt;</code> with your actual NFS server IP address and export path, respectively.</p>
</li>
<li>
<p>Confirm successful mount by checking the directory listing:</p>
<div class="literalblock">
<div class="content">
<pre>```bash
ls /mnt/temp
```</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Verify Storage Class Availability</strong></p>
<div class="ulist">
<ul>
<li>
<p>Log in to your OpenShift cluster’s web console or use <code>oc</code> CLI to access Kubernetes resources.</p>
</li>
<li>
<p>Check for a storage class corresponding to your NFS setup. This should be listed under PersistentVolumeClaims (PVC) and VolumeSnapshotClasses if you&#8217;ve configured snapshots:</p>
<div class="literalblock">
<div class="content">
<pre>```bash
oc get sc
```</pre>
</div>
</div>
</li>
<li>
<p>Ensure the storage class details match what was configured during NFS setup, including provisioner, parameters, etc.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Test Persistent Volume Claims</strong></p>
<div class="ulist">
<ul>
<li>
<p>Create a new PVC using the previously verified storage class:</p>
<div class="literalblock">
<div class="content">
<pre>  ```bash
  oc create -f - &lt;&lt;EOF
  apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: &lt;desired-pvc-name&gt;
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi # Adjust as needed
  storageClassName: &lt;storage_class_name&gt;
EOF
  ```</pre>
</div>
</div>
</li>
<li>
<p>Replace <code>&lt;desired-pvc-name&gt;</code> and <code>&lt;storage_class_name&gt;</code> with appropriate names.</p>
</li>
<li>
<p>Verify the PVC&#8217;s status to ensure it is bound correctly:</p>
<div class="literalblock">
<div class="content">
<pre>```bash
oc get pvc
```</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Data Integrity Check</strong></p>
<div class="ulist">
<ul>
<li>
<p>Optionally, create a pod that uses this PVC and write some test data to validate if reads and writes are functioning as expected:</p>
<div class="literalblock">
<div class="content">
<pre>  ```bash
  oc create -f - &lt;&lt;EOF
  apiVersion: v1
kind: Pod
metadata:
  name: &lt;test-pod-name&gt;
spec:
  containers:
  - name: &lt;test-container-name&gt;
    image: busybox
    command:
      - "/bin/sh"
      - "-c"
      - "touch /data/testfile; sleep 300; echo 'Test data written' &gt; /data/testfile"
    volumeMounts:
    - mountPath: /data
      name: &lt;pvc-name&gt;
  restartPolicy: Never
  volumes:
  - name: &lt;pvc-name&gt;
    persistentVolumeClaim:
      claimName: &lt;desired-pvc-name&gt;
EOF
  ```</pre>
</div>
</div>
</li>
<li>
<p>Replace <code>&lt;test-pod-name&gt;</code>, <code>&lt;test-container-name&gt;</code>, and <code>&lt;desired-pvc-name&gt;</code> with suitable names.</p>
</li>
<li>
<p>After the pod runs, inspect it to confirm that data was written correctly:</p>
<div class="literalblock">
<div class="content">
<pre>```bash
oc exec &lt;test-pod-name&gt; -- cat /data/testfile
```</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_troubleshooting"><a class="anchor" href="#_troubleshooting"></a>Troubleshooting</h3>
<div class="paragraph">
<p>If any of the above steps fail or show unexpected results, revisit the configuration in [CONFIGURING NFS STORAGE](#configuring-nfs-storage) section. Common issues might include incorrect export settings, network connectivity problems, or misconfigurations in OpenShift’s storage classes and PVC definitions. Ensure all components—NFS server, OpenShift cluster networking, and Kubernetes storage resources—are properly aligned for successful data plane operations with RHOSP.</p>
</div>
<div class="paragraph">
<p>Upon completing these verifications successfully, you can proceed to [INSTALL CONTROL PLANE](#install-control-plane) with confidence that your storage is correctly set up for use in RHOSP deployments.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="configuring-nfs-storage.html">Configuring NFS storage</a></span>
  <span class="next"><a href="../install-control-plane/install-control-plane.html">Install control plane</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
