<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Create the OpenStack Control Plane :: RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</title>
    <link rel="prev" href="install-the-openstack-operator.html">
    <link rel="next" href="troubleshoot-the-openstack-control-plane.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rcb-test-rhoso-0" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction/introduction.html">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/traditional-tripleo-deployment-versus-deployment-with-openshift-cluster.html">Traditional TripleO deployment versus deployment with OpenShift cluster.</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/rhoso-installation-process-overview.html">RHOSO installation process overview</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../prerequisites-for-installation/prerequisites-for-installation.html">Prerequisites for Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../prerequisites-for-installation/about-the-prerequisite-operators.html">About the Prerequisite Operators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../prerequisites-for-installation/install-nmstate-operator.html">Install NMState Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../prerequisites-for-installation/install-metallb-operator.html">Install MetalLB Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../prerequisites-for-installation/install-cert-manager-operator.html">Install Cert-Manager Operator</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../preparing-rhocp-for-rhosp-network-isolation/preparing-rhocp-for-rhosp-network-isolation.html">Preparing RHOCP for RHOSP Network Isolation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preparing-rhocp-for-rhosp-network-isolation/setting-up-node-network-configuration-policy.html">Setting up Node Network Configuration Policy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preparing-rhocp-for-rhosp-network-isolation/configuring-network-attachment-definition.html">Configuring Network Attachment Definition</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preparing-rhocp-for-rhosp-network-isolation/configure-metallb-ip-address-pools.html">Configure MetalLB IP Address Pools</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preparing-rhocp-for-rhosp-network-isolation/setup-metallb-l2-advertisement-configuration.html">Setup MetalLB L2 Advertisement configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../storage/storage.html">Storage</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/configuring-nfs-storage.html">Configuring NFS storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/verify-storage-configuration.html">Verify storage configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="install-control-plane.html">Install control plane</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configure-the-secrets.html">Configure the secrets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="install-the-openstack-operator.html">Install the OpenStack Operator</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="create-the-openstack-control-plane.html">Create the OpenStack Control Plane</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshoot-the-openstack-control-plane.html">Troubleshoot the OpenStack Control Plane</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="verify-openstack-control-plane-configuration.html">Verify OpenStack control plane configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../create-data-plane/create-data-plane.html">Create data plane</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-data-plane/create-the-data-plane-network-configuration.html">Create the Data Plane Network configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-data-plane/create-the-data-plane-vm.html">Create the Data Plane VM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-data-plane/data-plane-deployment.html">Data Plane Deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-data-plane/troubleshoot-the-data-plane-deployment.html">Troubleshoot the Data Plane deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-data-plane/verify-data-plane-deployment.html">Verify data plane deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../access-openstack/access-openstack.html">Access OpenStack</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../access-openstack/steps-to-access-openstack.html">Steps to Access OpenStack</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">RHOSP18 - Provision Control Plane Services and Manage Data Plane Nodes</a></li>
    <li><a href="install-control-plane.html">Install control plane</a></li>
    <li><a href="create-the-openstack-control-plane.html">Create the OpenStack Control Plane</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Create the OpenStack Control Plane</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>===</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_the_openstack_control_plane"><a class="anchor" href="#_create_the_openstack_control_plane"></a>Create the OpenStack Control Plane</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we will guide you through creating the OpenStack Control Plane using the OpenStack Operator installed previously. This step is crucial as it sets up and configures the essential services required to manage the Red Hat OpenStack Platform (RHOSP) environment. Follow these steps:</p>
</div>
<div class="sect2">
<h3 id="_1_configure_the_secrets"><a class="anchor" href="#_1_configure_the_secrets"></a>1. Configure the Secrets</h3>
<div class="paragraph">
<p>Before creating the OpenStack Control Plane, ensure that you have properly configured the necessary secrets. These secrets hold sensitive data like passwords and encryption keys. Execute the following commands to create required Kubernetes secrets using <code>kubectl</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Create a secret for the keystone service
kubectl create secret generic keystone-secret \
    --from-literal=password=your_keystone_password \
    --namespace=openstack

# Create a secret for the mysql service
kubectl create secret generic mysql-secret \
    --from-literal=password=your_mysql_password \
    --namespace=openstack</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>your_keystone_password</code> and <code>your_mysql_password</code> with appropriate secure passwords.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_install_openstack_operator"><a class="anchor" href="#_2_install_openstack_operator"></a>2. Install OpenStack Operator</h3>
<div class="paragraph">
<p>Make sure the Red Hat OpenStack Platform (RHOSP) Operator is installed in your OpenShift cluster as per previous steps. If not, please refer to the installation instructions before proceeding further.</p>
</div>
</div>
<div class="sect2">
<h3 id="_3_create_the_openstack_control_plane"><a class="anchor" href="#_3_create_the_openstack_control_plane"></a>3. Create the OpenStack Control Plane</h3>
<div class="paragraph">
<p>Now, we create the control plane resources using <code>OpenStackControlPlane</code> custom resource definition (CRD). This process involves multiple sub-resources for different OpenStack services. Run the following command in your terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt;EOF | kubectl apply -f -
apiVersion: osp-director.openstack.org/v1beta1
kind: OpenStackControlPlane
metadata:
  name: osp-control-plane
  namespace: openstack
spec:
  # ... (other specifications)

  # Keystone configuration
  keystone:
    enabled: true
    password: your_keystone_password

  # Glance configuration
  glance:
    enabled: true

  # Nova compute configuration
  nova:
    enabled: true
    count: 1

  # Neutron ML2 mechanism drivers
  neutron:
    enabled: true
    ml2_mechanism_drivers:
      - baremetal

  # Ironic API and Conductor services
  ironic:
    enabled: true
    count: 1

  # Cinder configuration
  cinder:
    enabled: true
    volume_backend_name: local

  # ... (other services)
EOF</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensure you replace placeholders like <code>your_keystone_password</code> with actual sensitive data. The full configuration will depend on your specific RHOSP deployment needs, including the number of instances for each service and other tuning parameters.</p>
</div>
</div>
<div class="sect2">
<h3 id="_4_troubleshoot_openstack_control_plane_optional"><a class="anchor" href="#_4_troubleshoot_openstack_control_plane_optional"></a>4. Troubleshoot OpenStack Control Plane (Optional)</h3>
<div class="paragraph">
<p>During or after creating the control plane, you might encounter issues requiring troubleshooting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Check logs</strong>: Examine OpenShift pods' logs to identify errors. Use commands like <code>kubectl logs &lt;pod_name&gt;</code> or access the OpenShift console for detailed logging views.</p>
</li>
<li>
<p><strong>Verify resources</strong>: Ensure that all required persistent volumes and other resources are correctly provisioned in your cluster.</p>
</li>
<li>
<p><strong>Review events</strong>: Check the OpenShift Events for any failures or warnings related to OpenStack Control Plane deployment using <code>kubectl get events -n openstack</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_5_verify_openstack_control_plane_configuration"><a class="anchor" href="#_5_verify_openstack_control_plane_configuration"></a>5. Verify OpenStack Control Plane Configuration</h3>
<div class="paragraph">
<p>After successfully creating the OpenStack Control Plane, verify its configuration and functionality:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access the OpenShift console and check the status of pods in the <code>openstack</code> namespace to ensure all services are running correctly.</p>
</li>
<li>
<p>Validate that necessary network policies and routes have been created for communication between control plane components.</p>
</li>
<li>
<p>Use tools like <code>openstack</code> CLI or Horizon Dashboard (once available) to interact with your RHOSP environment and confirm that core services like Keystone, Glance, Nova, etc., are operational.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Following these steps will successfully create an OpenStack Control Plane within your Red Hat OpenShift cluster, setting the foundation for managing data plane nodes and offering a managed environment for your RHOSP deployment.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="install-the-openstack-operator.html">Install the OpenStack Operator</a></span>
  <span class="next"><a href="troubleshoot-the-openstack-control-plane.html">Troubleshoot the OpenStack Control Plane</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
